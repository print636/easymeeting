# EasyMeeting 在线视频会议系统 项目

## 使用到的技术：
Spring Boot、SpringMVC、MyBatis、MySQL、Redis、Redisson、RabbitMQ、Netty、WebSocket、FFmpeg、雪花算法、JWT

## 项目功能：
本项目是一个在线视频会议系统，包括用户端和管理端两部分。用户端支持快速创建会议、预约会议、实时音视频通话、文字聊天、文件分享等功能；管理端可以对用户信息、会议记录进行管理维护，支持用户状态管理和强制下线。系统支持 WebRTC 点对点音视频通信，通过 WebSocket 实现实时消息推送，支持图片和视频文件的上传、转码和流式播放。

## 工作职责：
1. 使用 Netty 框架搭建 WebSocket 服务器，通过 ChannelGroup 管理会议房间，实现多人在线实时通信；使用 ConcurrentHashMap 维护用户连接映射，支持点对点消息和群组广播；实现心跳检测机制，通过 IdleStateHandler 检测空闲连接并自动断开，保证连接资源有效利用。

2. 设计并实现消息中间件模块，支持 Redis Pub/Sub 和 RabbitMQ 两种模式，通过 @ConditionalOnProperty 实现灵活切换；在 RabbitMQ 中实现消息重试机制（最多3次），通过消息头记录重试次数，避免消息丢失；使用 Redisson 实现分布式发布订阅，支持跨服务器消息推送。

3. 使用 Redis 存储用户 Token 和会议成员状态，通过 Hash 结构存储会议房间成员信息，提升查询效率；设计 Token 认证机制，支持单点登录检测，通过 lastLoginTime 和 lastOffTime 判断用户在线状态；为 Token 设置过期时间，自动清理过期数据。

4. 实现聊天消息表按月分表存储，使用 TableSplitUtils 工具类根据会议ID动态路由到对应分表（32张分表），解决单表数据量过大的问题，提升查询性能；使用雪花算法生成全局唯一消息ID，通过系统属性配置数据中心ID和机器ID，避免分布式环境下ID冲突。

5. 集成 FFmpeg 进行媒体处理，实现图片格式统一（转为JPG）、视频格式转换（转为MP4，支持HEVC编码）、图片缩略图生成和视频封面提取；使用 ProcessUtils 封装系统命令执行，支持跨平台调用；文件按月份分目录存储，便于管理和清理。

6. 实现文件流式传输功能，支持 HTTP Range 请求，通过 RandomAccessFile 实现断点续传和视频流式播放；为图片资源设置30天缓存策略，优化加载性能；支持文件上传进度跟踪和错误重试机制。
